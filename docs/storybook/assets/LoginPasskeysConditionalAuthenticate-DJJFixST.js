import{j as s}from"./jsx-runtime-Cf8x2fCZ.js";import{r as A}from"./index-BlmOqGMO.js";import{c as I}from"./kc.gen-DublLCkN.js";import{g as F}from"./KcPage-Bf8_W5ld.js";import{u as S}from"./LoginPasskeysConditionalAuthenticate.useScript-ByWk3MJj.js";import"./index-yBjzXJbu.js";import"./assert-lEPzpKR_.js";import"./iframe-DOGX7Igh.js";import"./button-C_ykKUfv.js";import"./index-Dv8KEsPl.js";import"./index-Dp3B9jqt.js";import"./clsx-B-dksMZM.js";import"./utils-CKXzwFwe.js";import"./createLucideIcon-C49h6iyD.js";import"./index-RG4fqDpO.js";import"./index-fNjTmf9T.js";import"./index-BdQq_4o_.js";import"./index-Cnu3ZVWt.js";import"./dropdown-menu-6x-QXDHJ.js";import"./index-De3Pmiai.js";import"./index-C6-d9oZJ.js";import"./index-xprPBo3d.js";import"./index-DZ2oWOeb.js";import"./mode-toggle-nGGCW_pk.js";import"./card-sF6WieIs.js";/* empty css              */import"./waitForElementMountedOnDom-YalKF7Os.js";function as(b){var c;const{kcContext:l,i18n:o,doUseDefaultCss:p,Template:k,classes:h}=b,{messagesPerField:d,login:y,url:m,usernameHidden:C,shouldDisplayAuthenticators:O,authenticators:n,registrationDisabled:f,realm:j}=l,{msg:i,msgStr:N,advancedMsg:g}=o,{kcClsx:e}=F({doUseDefaultCss:p,classes:h}),x="authenticateWebAuthnButton";return S({authButtonId:x,kcContext:l,i18n:o}),s.jsxs(k,Object.assign({kcContext:l,i18n:o,doUseDefaultCss:p,classes:h,headerNode:i("passkey-login-title"),infoNode:j.registrationAllowed&&!f&&s.jsx("div",Object.assign({id:"kc-registration"},{children:s.jsxs("span",{children:["$",i("noAccount")," ",s.jsx("a",Object.assign({tabIndex:6,href:m.registrationUrl},{children:i("doRegister")}))]})}))},{children:[s.jsxs("form",Object.assign({id:"webauth",action:m.loginAction,method:"post"},{children:[s.jsx("input",{type:"hidden",id:"clientDataJSON",name:"clientDataJSON"}),s.jsx("input",{type:"hidden",id:"authenticatorData",name:"authenticatorData"}),s.jsx("input",{type:"hidden",id:"signature",name:"signature"}),s.jsx("input",{type:"hidden",id:"credentialId",name:"credentialId"}),s.jsx("input",{type:"hidden",id:"userHandle",name:"userHandle"}),s.jsx("input",{type:"hidden",id:"error",name:"error"})]})),s.jsxs("div",Object.assign({className:e("kcFormGroupClass"),"no-bottom-margin":"true",style:{marginBottom:0}},{children:[n!==void 0&&Object.keys(n).length!==0&&s.jsxs(s.Fragment,{children:[s.jsx("form",Object.assign({id:"authn_select",className:e("kcFormClass")},{children:n.authenticators.map((t,a)=>s.jsx("input",{type:"hidden",name:"authn_use_chk",readOnly:!0,value:t.credentialId},a))})),O&&s.jsxs(s.Fragment,{children:[n.authenticators.length>1&&s.jsx("p",Object.assign({className:e("kcSelectAuthListItemTitle")},{children:i("passkey-available-authenticators")})),s.jsx("div",Object.assign({className:e("kcFormClass")},{children:n.authenticators.map((t,a)=>s.jsxs("div",Object.assign({id:`kc-webauthn-authenticator-item-${a}`,className:e("kcSelectAuthListItemClass")},{children:[s.jsx("i",{className:I((()=>{const r=e(t.transports.iconClass);return r===t.transports.iconClass?e("kcWebAuthnDefaultIcon"):r})(),e("kcSelectAuthListItemIconPropertyClass"))}),s.jsxs("div",Object.assign({className:e("kcSelectAuthListItemBodyClass")},{children:[s.jsx("div",Object.assign({id:`kc-webauthn-authenticator-label-${a}`,className:e("kcSelectAuthListItemHeadingClass")},{children:g(t.label)})),t.transports!==void 0&&t.transports.displayNameProperties!==void 0&&t.transports.displayNameProperties.length!==0&&s.jsx("div",Object.assign({id:`kc-webauthn-authenticator-transport-${a}`,className:e("kcSelectAuthListItemDescriptionClass")},{children:t.transports.displayNameProperties.map((r,u,v)=>s.jsxs(A.Fragment,{children:[s.jsxs("span",{children:[" ",g(r)," "]},u),u!==v.length-1&&s.jsx("span",{children:", "})]},u))})),s.jsxs("div",Object.assign({className:e("kcSelectAuthListItemDescriptionClass")},{children:[s.jsx("span",Object.assign({id:`kc-webauthn-authenticator-createdlabel-${a}`},{children:i("passkey-createdAt-label")})),s.jsx("span",Object.assign({id:`kc-webauthn-authenticator-created-${a}`},{children:t.createdAt}))]}))]})),s.jsx("div",{className:e("kcSelectAuthListItemFillClass")})]}),a))}))]})]}),s.jsx("div",Object.assign({id:"kc-form"},{children:s.jsxs("div",Object.assign({id:"kc-form-wrapper"},{children:[j.password&&s.jsx("form",Object.assign({id:"kc-form-login",action:m.loginAction,method:"post",style:{display:"none"},onSubmit:t=>{try{t.target.login.disabled=!0}catch{}return!0}},{children:!C&&s.jsxs("div",Object.assign({className:e("kcFormGroupClass")},{children:[s.jsx("label",Object.assign({htmlFor:"username",className:e("kcLabelClass")},{children:i("passkey-autofill-select")})),s.jsx("input",{tabIndex:1,id:"username","aria-invalid":d.existsError("username"),className:e("kcInputClass"),name:"username",defaultValue:(c=y.username)!==null&&c!==void 0?c:"",autoComplete:"username webauthn",type:"text",autoFocus:!0}),d.existsError("username")&&s.jsx("span",Object.assign({id:"input-error-username",className:e("kcInputErrorMessageClass"),"aria-live":"polite"},{children:d.get("username")}))]}))})),s.jsx("div",Object.assign({id:"kc-form-passkey-button",className:e("kcFormButtonsClass"),style:{display:"none"}},{children:s.jsx("input",{id:x,type:"button",autoFocus:!0,value:N("passkey-doAuthenticate"),className:e("kcButtonClass","kcButtonPrimaryClass","kcButtonBlockClass","kcButtonLargeClass")})}))]}))}))]}))]}))}export{as as default};

import{j as s}from"./jsx-runtime-Cf8x2fCZ.js";import{r as a}from"./index-BlmOqGMO.js";import{c as T}from"./kc.gen-DublLCkN.js";import{g as U}from"./KcPageStory-BD8iT_7d.js";import"./index-yBjzXJbu.js";import"./assert-lEPzpKR_.js";import"./iframe-DOGX7Igh.js";function G(t){var n,c;const{kcContext:l,i18n:u,doUseDefaultCss:w,Template:C}=t,p=Object.assign(Object.assign({},t.classes),{kcBodyClass:T((n=t.classes)===null||n===void 0?void 0:n.kcBodyClass,"password")}),{kcClsx:O}=U({doUseDefaultCss:w,classes:p}),{url:P,password:j,account:y,stateChecker:k}=l,{msgStr:g,msg:r}=u,[h,S]=a.useState(""),[i,B]=a.useState(""),[f,E]=a.useState(""),[d,b]=a.useState(""),[m,x]=a.useState(""),[F,H]=a.useState(!1),[A,R]=a.useState(!1),N=e=>{j.passwordSet&&b(e===h?g("newPasswordSameAsOld"):"")},v=e=>{e!==""&&x(i!==e?g("passwordConfirmNotMatch"):"")};return s.jsxs(C,Object.assign({},{kcContext:Object.assign(Object.assign({},l),{message:d!==""?{type:"error",summary:d}:m!==""?{type:"error",summary:m}:l.message}),i18n:u,doUseDefaultCss:w,classes:p},{active:"password"},{children:[s.jsxs("div",Object.assign({className:"row"},{children:[s.jsx("div",Object.assign({className:"col-md-10"},{children:s.jsx("h2",{children:r("changePasswordHtmlTitle")})})),s.jsx("div",Object.assign({className:"col-md-2 subtitle"},{children:s.jsx("span",Object.assign({className:"subtitle"},{children:r("allFieldsRequired")}))}))]})),s.jsxs("form",Object.assign({action:P.passwordUrl,className:"form-horizontal",method:"post"},{children:[s.jsx("input",{type:"text",id:"username",name:"username",value:(c=y.username)!==null&&c!==void 0?c:"",autoComplete:"username",readOnly:!0,style:{display:"none"}}),j.passwordSet&&s.jsxs("div",Object.assign({className:"form-group"},{children:[s.jsx("div",Object.assign({className:"col-sm-2 col-md-2"},{children:s.jsx("label",Object.assign({htmlFor:"password",className:"control-label"},{children:r("password")}))})),s.jsx("div",Object.assign({className:"col-sm-10 col-md-10"},{children:s.jsx("input",{type:"password",className:"form-control",id:"password",name:"password",autoFocus:!0,autoComplete:"current-password",value:h,onChange:e=>S(e.target.value)})}))]})),s.jsx("input",{type:"hidden",id:"stateChecker",name:"stateChecker",value:k}),s.jsxs("div",Object.assign({className:"form-group"},{children:[s.jsx("div",Object.assign({className:"col-sm-2 col-md-2"},{children:s.jsx("label",Object.assign({htmlFor:"password-new",className:"control-label"},{children:r("passwordNew")}))})),s.jsx("div",Object.assign({className:"col-sm-10 col-md-10"},{children:s.jsx("input",{type:"password",className:"form-control",id:"password-new",name:"password-new",autoComplete:"new-password",value:i,onChange:e=>{const o=e.target.value;B(o),F&&N(o)},onBlur:()=>{H(!0),N(i)}})}))]})),s.jsxs("div",Object.assign({className:"form-group"},{children:[s.jsx("div",Object.assign({className:"col-sm-2 col-md-2"},{children:s.jsx("label",Object.assign({htmlFor:"password-confirm",className:"control-label two-lines"},{children:r("passwordConfirm")}))})),s.jsx("div",Object.assign({className:"col-sm-10 col-md-10"},{children:s.jsx("input",{type:"password",className:"form-control",id:"password-confirm",name:"password-confirm",autoComplete:"new-password",value:f,onChange:e=>{const o=e.target.value;E(o),A&&v(o)},onBlur:()=>{R(!0),v(f)}})}))]})),s.jsx("div",Object.assign({className:"form-group"},{children:s.jsx("div",Object.assign({id:"kc-form-buttons",className:"col-md-offset-2 col-md-10 submit"},{children:s.jsx("div",{children:s.jsx("button",Object.assign({disabled:d!==""||m!=="",type:"submit",className:O("kcButtonClass","kcButtonPrimaryClass","kcButtonLargeClass"),name:"submitAction",value:"Save"},{children:r("doSave")}))})}))}))]}))]}))}export{G as default};

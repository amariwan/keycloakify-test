import{j as e}from"./jsx-runtime-Cf8x2fCZ.js";import{g as T}from"./KcPage-Bf8_W5ld.js";import{k as h}from"./kc.gen-DublLCkN.js";import{B as m}from"./button-C_ykKUfv.js";import{I as p}from"./input-BUdNeJ3u.js";import{a as b}from"./checkbox-D-RZ_Qko.js";import"./index-yBjzXJbu.js";import"./iframe-DOGX7Igh.js";import"./index-BlmOqGMO.js";import"./assert-lEPzpKR_.js";import"./index-RG4fqDpO.js";import"./index-fNjTmf9T.js";import"./index-BdQq_4o_.js";import"./index-Cnu3ZVWt.js";import"./index-Dv8KEsPl.js";import"./dropdown-menu-6x-QXDHJ.js";import"./index-De3Pmiai.js";import"./createLucideIcon-C49h6iyD.js";import"./index-C6-d9oZJ.js";import"./index-xprPBo3d.js";import"./utils-CKXzwFwe.js";import"./clsx-B-dksMZM.js";import"./index-DZ2oWOeb.js";import"./mode-toggle-nGGCW_pk.js";import"./card-sF6WieIs.js";/* empty css              */import"./index-Dp3B9jqt.js";import"./label-CPZjyMp-.js";function f(c){const{kcContext:r,i18n:l,doUseDefaultCss:a,Template:j,classes:u}=c,{kcClsx:t}=T({doUseDefaultCss:a,classes:u}),{url:g,isAppInitiatedAction:k,totp:i,mode:d,messagesPerField:o}=r,{msg:s,msgStr:n,advancedMsg:C}=l;return e.jsx(j,{kcContext:r,i18n:l,doUseDefaultCss:a,classes:u,headerNode:s("loginTotpTitle"),displayMessage:!o.existsError("totp","userLabel"),children:e.jsxs(e.Fragment,{children:[e.jsxs("ol",{id:"kc-totp-settings",children:[e.jsxs("li",{children:[e.jsx("p",{children:s("loginTotpStep1")}),e.jsx("ul",{id:"kc-totp-supported-apps",children:i.supportedApplications.map(x=>e.jsx("li",{children:C(x)},x))})]}),d=="manual"?e.jsxs(e.Fragment,{children:[e.jsxs("li",{children:[e.jsx("p",{children:s("loginTotpManualStep2")}),e.jsx("p",{children:e.jsx("span",{id:"kc-totp-secret-key",children:i.totpSecretEncoded})}),e.jsx("p",{children:e.jsx("a",{href:i.qrUrl,id:"mode-barcode",children:s("loginTotpScanBarcode")})})]}),e.jsxs("li",{children:[e.jsx("p",{children:s("loginTotpManualStep3")}),e.jsxs("ul",{children:[e.jsxs("li",{id:"kc-totp-type",children:[s("loginTotpType"),": ",s(`loginTotp.${i.policy.type}`)]}),e.jsxs("li",{id:"kc-totp-algorithm",children:[s("loginTotpAlgorithm"),": ",i.policy.getAlgorithmKey()]}),e.jsxs("li",{id:"kc-totp-digits",children:[s("loginTotpDigits"),": ",i.policy.digits]}),i.policy.type==="totp"?e.jsxs("li",{id:"kc-totp-period",children:[s("loginTotpInterval"),": ",i.policy.period]}):e.jsxs("li",{id:"kc-totp-counter",children:[s("loginTotpCounter"),": ",i.policy.initialCounter]})]})]})]}):e.jsxs("li",{children:[e.jsx("p",{children:s("loginTotpStep2")}),e.jsx("img",{id:"kc-totp-secret-qr-code",src:`data:image/png;base64, ${i.totpSecretQrCode}`,alt:"Figure: Barcode"}),e.jsx("br",{}),e.jsx("p",{children:e.jsx("a",{href:i.manualUrl,id:"mode-manual",children:s("loginTotpUnableToScan")})})]}),e.jsxs("li",{children:[e.jsx("p",{children:s("loginTotpStep3")}),e.jsx("p",{children:s("loginTotpStep3DeviceName")})]})]}),e.jsxs("form",{action:g.loginAction,className:t("kcFormClass"),id:"kc-totp-settings-form",method:"post",children:[e.jsxs("div",{className:t("kcFormGroupClass"),children:[e.jsxs("div",{className:t("kcInputWrapperClass"),children:[e.jsx("label",{htmlFor:"totp",className:t("kcLabelClass"),children:s("authenticatorCode")})," ",e.jsx("span",{className:"required",children:"*"})]}),e.jsxs("div",{className:t("kcInputWrapperClass"),children:[e.jsx(p,{type:"text",id:"totp",name:"totp",autoComplete:"off",className:t("kcInputClass"),"aria-invalid":o.existsError("totp")}),o.existsError("totp")&&e.jsx("span",{id:"input-error-otp-code",className:t("kcInputErrorMessageClass"),"aria-live":"polite",dangerouslySetInnerHTML:{__html:h(o.get("totp"))}})]}),e.jsx(p,{type:"hidden",id:"totpSecret",name:"totpSecret",value:i.totpSecret}),d&&e.jsx(p,{type:"hidden",id:"mode",value:d})]}),e.jsxs("div",{className:t("kcFormGroupClass"),children:[e.jsxs("div",{className:t("kcInputWrapperClass"),children:[e.jsx("label",{htmlFor:"userLabel",className:t("kcLabelClass"),children:s("loginTotpDeviceName")})," ",i.otpCredentials.length>=1&&e.jsx("span",{className:"required",children:"*"})]}),e.jsxs("div",{className:t("kcInputWrapperClass"),children:[e.jsx(p,{type:"text",id:"userLabel",name:"userLabel",autoComplete:"off",className:t("kcInputClass"),"aria-invalid":o.existsError("userLabel")}),o.existsError("userLabel")&&e.jsx("span",{id:"input-error-otp-label",className:t("kcInputErrorMessageClass"),"aria-live":"polite",dangerouslySetInnerHTML:{__html:h(o.get("userLabel"))}})]})]}),e.jsx("div",{className:t("kcFormGroupClass"),children:e.jsx(v,{kcClsx:t,i18n:l})}),k?e.jsxs(e.Fragment,{children:[e.jsx(m,{type:"submit",className:"w-full",id:"saveTOTPBtn",value:n("doSubmit"),children:n("doSubmit")}),e.jsx(m,{type:"submit",className:"w-full",id:"cancelTOTPBtn",name:"cancel-aia",value:"true",children:s("doCancel")})]}):e.jsx(m,{type:"submit",className:"w-full",id:"saveTOTPBtn",value:n("doSubmit"),children:n("doSubmit")})]})]})})}function v(c){const{kcClsx:r,i18n:l}=c,{msg:a}=l;return e.jsx("div",{id:"kc-form-options",className:r("kcFormOptionsClass"),children:e.jsx("div",{className:r("kcFormOptionsWrapperClass"),children:e.jsx(b,{id:"logout-sessions",name:"logout-sessions",value:"on",defaultChecked:!0,label:a("logoutOtherSessions")})})})}f.__docgenInfo={description:"",methods:[],displayName:"LoginConfigTotp"};export{f as default};

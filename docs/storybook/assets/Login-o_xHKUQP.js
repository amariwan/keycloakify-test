import{j as e}from"./jsx-runtime-Cf8x2fCZ.js";import{r as p}from"./index-BlmOqGMO.js";import{k as x}from"./kc.gen-DublLCkN.js";import{a as b}from"./assert-lEPzpKR_.js";import{B as N}from"./button-C_ykKUfv.js";import{I as h}from"./input-BUdNeJ3u.js";import"./index-yBjzXJbu.js";import"./iframe-DOGX7Igh.js";import"./index-Dv8KEsPl.js";import"./index-Dp3B9jqt.js";import"./clsx-B-dksMZM.js";import"./utils-CKXzwFwe.js";import"./createLucideIcon-C49h6iyD.js";function y(o){const{kcContext:m,i18n:l,Template:c}=o,{social:a,realm:s,url:n,usernameHidden:t,login:u,auth:g,registrationDisabled:w,messagesPerField:i}=m,{msg:r,msgStr:j}=l,[f,v]=p.useState(!1);return e.jsx(c,{...o,displayMessage:!i.existsError("username","password"),headerNode:r("loginAccountTitle"),displayInfo:s.password&&s.registrationAllowed&&!w,infoNode:e.jsxs("span",{children:[r("noAccount")," ",e.jsx("a",{className:"text-blue-600 hover:underline",tabIndex:8,href:n.registrationUrl,children:r("doRegister")})]}),socialProvidersNode:e.jsx(e.Fragment,{children:s.password&&(a==null?void 0:a.providers)!==void 0&&a.providers.length!==0&&e.jsxs("div",{id:"kc-social-providers",className:"mt-6",children:[e.jsx("hr",{className:"my-6"}),e.jsx("h2",{className:"text-xl font-semibold mb-4",children:r("identity-provider-login-label")}),e.jsx("ul",{className:`grid ${a.providers.length>3?"grid-cols-2 gap-4":"grid-cols-1 gap-2"}`,children:a.providers.map(d=>e.jsx("li",{children:e.jsxs("a",{id:`social-${d.alias}`,className:"flex items-center justify-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",href:d.loginUrl,children:[d.iconClasses&&e.jsx("i",{className:`mr-2 ${d.iconClasses}`,"aria-hidden":"true"}),e.jsx("span",{dangerouslySetInnerHTML:{__html:x(d.displayName)}})]})},d.alias))})]})}),children:e.jsx("div",{className:"w-full max-w-md",children:e.jsx("div",{className:"py-8 px-4 sm:rounded-lg sm:px-6",children:s.password&&e.jsxs("form",{onSubmit:()=>(v(!0),!0),action:n.loginAction,method:"post",className:"space-y-6",children:[!t&&e.jsxs("div",{children:[e.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700",children:s.loginWithEmailAllowed?s.registrationEmailAsUsername?r("email"):r("usernameOrEmail"):r("username")}),e.jsx("div",{className:"mt-1",children:e.jsx(h,{tabIndex:2,id:"username",name:"username",defaultValue:u.username??"",type:"text",autoFocus:!0,autoComplete:"username","aria-invalid":i.existsError("username","password"),className:"h-10"})}),i.existsError("username","password")&&e.jsx("p",{className:"mt-2 text-sm text-red-600",id:"input-error","aria-live":"polite",children:e.jsx("span",{dangerouslySetInnerHTML:{__html:x(i.getFirstError("username","password"))}})})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:r("password")}),e.jsx(I,{i18n:l,passwordInputId:"password",children:e.jsx(h,{tabIndex:3,id:"password",name:"password",type:"password",autoComplete:"current-password","aria-invalid":i.existsError("username","password"),className:"h-10"})}),t&&i.existsError("username","password")&&e.jsx("p",{className:"mt-2 text-sm text-red-600",id:"input-error","aria-live":"polite",children:e.jsx("span",{dangerouslySetInnerHTML:{__html:x(i.getFirstError("username","password"))}})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[s.rememberMe&&!t&&e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{tabIndex:5,id:"rememberMe",name:"rememberMe",type:"checkbox",className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded",defaultChecked:!!u.rememberMe}),e.jsx("label",{htmlFor:"rememberMe",className:"ml-2 block text-sm text-gray-900",children:r("rememberMe")})]}),s.resetPasswordAllowed&&e.jsx("div",{className:"text-sm",children:e.jsx("a",{tabIndex:6,href:n.loginResetCredentialsUrl,className:"font-medium text-indigo-600 hover:text-indigo-500",children:r("doForgotPassword")})})]}),e.jsxs("div",{children:[e.jsx("input",{type:"hidden",id:"id-hidden-input",name:"credentialId",value:g.selectedCredential}),e.jsx(N,{disabled:f,name:"login",type:"submit",variant:"default",className:"w-full",children:j("doLogIn")})]})]})})})})}function I(o){const{i18n:m,passwordInputId:l,children:c}=o,{msgStr:a}=m,[s,n]=p.useReducer(t=>!t,!1);return p.useEffect(()=>{const t=document.getElementById(l);b(t instanceof HTMLInputElement),t.type=s?"text":"password"},[s]),e.jsxs("div",{className:"mt-1 relative rounded-md shadow-sm",children:[c,e.jsxs("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center text-sm leading-5","aria-label":a(s?"hidePassword":"showPassword"),"aria-controls":l,onClick:n,children:[e.jsxs("svg",{className:`h-5 w-5 text-gray-400 ${s?"hidden":"block"}`,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:[e.jsx("path",{d:"M10 12a2 2 0 100-4 2 2 0 000 4z"}),e.jsx("path",{fillRule:"evenodd",d:"M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z",clipRule:"evenodd"})]}),e.jsxs("svg",{className:`h-5 w-5 text-gray-400 ${s?"block":"hidden"}`,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:[e.jsx("path",{fillRule:"evenodd",d:"M3.707 2.293a1 1 0 00-1.414 1.414l14 14a1 1 0 001.414-1.414l-1.473-1.473A10.014 10.014 0 0019.542 10C18.268 5.943 14.478 3 10 3a9.958 9.958 0 00-4.512 1.074l-1.78-1.781zm4.261 4.26l1.514 1.515a2.003 2.003 0 012.45 2.45l1.514 1.514a4 4 0 00-5.478-5.478z",clipRule:"evenodd"}),e.jsx("path",{d:"M12.454 16.697L9.75 13.992a4 4 0 01-3.742-3.741L2.335 6.578A9.98 9.98 0 00.458 10c1.274 4.057 5.065 7 9.542 7 .847 0 1.669-.105 2.454-.303z"})]})]})]})}y.__docgenInfo={description:"",methods:[],displayName:"Login"};export{y as default};

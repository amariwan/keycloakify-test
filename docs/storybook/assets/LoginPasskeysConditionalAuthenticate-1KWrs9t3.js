import{j as e}from"./jsx-runtime-Cf8x2fCZ.js";import{r as I}from"./index-BlmOqGMO.js";import{c as A}from"./kc.gen-DublLCkN.js";import{g as F}from"./KcPage-Bf8_W5ld.js";import{u as S}from"./LoginPasskeysConditionalAuthenticate.useScript-ByWk3MJj.js";import{I as L}from"./input-BUdNeJ3u.js";import"./index-yBjzXJbu.js";import"./assert-lEPzpKR_.js";import"./iframe-DOGX7Igh.js";import"./button-C_ykKUfv.js";import"./index-Dv8KEsPl.js";import"./index-Dp3B9jqt.js";import"./clsx-B-dksMZM.js";import"./utils-CKXzwFwe.js";import"./createLucideIcon-C49h6iyD.js";import"./index-RG4fqDpO.js";import"./index-fNjTmf9T.js";import"./index-BdQq_4o_.js";import"./index-Cnu3ZVWt.js";import"./dropdown-menu-6x-QXDHJ.js";import"./index-De3Pmiai.js";import"./index-C6-d9oZJ.js";import"./index-xprPBo3d.js";import"./index-DZ2oWOeb.js";import"./mode-toggle-nGGCW_pk.js";import"./card-sF6WieIs.js";/* empty css              */import"./waitForElementMountedOnDom-YalKF7Os.js";function w(j){const{kcContext:o,i18n:l,doUseDefaultCss:p,Template:g,classes:u}=j,{messagesPerField:c,login:y,url:d,usernameHidden:C,shouldDisplayAuthenticators:N,authenticators:r,registrationDisabled:b,realm:h}=o,{msg:i,msgStr:f,advancedMsg:x}=l,{kcClsx:s}=F({doUseDefaultCss:p,classes:u}),k="authenticateWebAuthnButton";return S({authButtonId:k,kcContext:o,i18n:l}),e.jsxs(g,{kcContext:o,i18n:l,doUseDefaultCss:p,classes:u,headerNode:i("passkey-login-title"),infoNode:h.registrationAllowed&&!b&&e.jsx("div",{id:"kc-registration",children:e.jsxs("span",{children:["$",i("noAccount")," ",e.jsx("a",{tabIndex:6,href:d.registrationUrl,children:i("doRegister")})]})}),children:[e.jsxs("form",{id:"webauth",action:d.loginAction,method:"post",children:[e.jsx("input",{type:"hidden",id:"clientDataJSON",name:"clientDataJSON"}),e.jsx("input",{type:"hidden",id:"authenticatorData",name:"authenticatorData"}),e.jsx("input",{type:"hidden",id:"signature",name:"signature"}),e.jsx("input",{type:"hidden",id:"credentialId",name:"credentialId"}),e.jsx("input",{type:"hidden",id:"userHandle",name:"userHandle"}),e.jsx("input",{type:"hidden",id:"error",name:"error"})]}),e.jsxs("div",{className:s("kcFormGroupClass"),style:{marginBottom:0},children:[r!==void 0&&Object.keys(r).length!==0&&e.jsxs(e.Fragment,{children:[e.jsx("form",{id:"authn_select",className:s("kcFormClass"),children:r.authenticators.map((t,a)=>e.jsx("input",{type:"hidden",name:"authn_use_chk",readOnly:!0,value:t.credentialId},a))}),N&&e.jsxs(e.Fragment,{children:[r.authenticators.length>1&&e.jsx("p",{className:s("kcSelectAuthListItemTitle"),children:i("passkey-available-authenticators")}),e.jsx("div",{className:s("kcFormClass"),children:r.authenticators.map((t,a)=>e.jsxs("div",{id:`kc-webauthn-authenticator-item-${a}`,className:s("kcSelectAuthListItemClass"),children:[e.jsx("i",{className:A((()=>{const n=s(t.transports.iconClass);return n===t.transports.iconClass?s("kcWebAuthnDefaultIcon"):n})(),s("kcSelectAuthListItemIconPropertyClass"))}),e.jsxs("div",{className:s("kcSelectAuthListItemBodyClass"),children:[e.jsx("div",{id:`kc-webauthn-authenticator-label-${a}`,className:s("kcSelectAuthListItemHeadingClass"),children:x(t.label)}),t.transports!==void 0&&t.transports.displayNameProperties!==void 0&&t.transports.displayNameProperties.length!==0&&e.jsx("div",{id:`kc-webauthn-authenticator-transport-${a}`,className:s("kcSelectAuthListItemDescriptionClass"),children:t.transports.displayNameProperties.map((n,m,v)=>e.jsxs(I.Fragment,{children:[e.jsxs("span",{children:[" ",x(n)," "]},m),m!==v.length-1&&e.jsx("span",{children:", "})]},m))}),e.jsxs("div",{className:s("kcSelectAuthListItemDescriptionClass"),children:[e.jsx("span",{id:`kc-webauthn-authenticator-createdlabel-${a}`,children:i("passkey-createdAt-label")}),e.jsx("span",{id:`kc-webauthn-authenticator-created-${a}`,children:t.createdAt})]})]}),e.jsx("div",{className:s("kcSelectAuthListItemFillClass")})]},a))})]})]}),e.jsx("div",{id:"kc-form",children:e.jsxs("div",{id:"kc-form-wrapper",children:[h.password&&e.jsx("form",{id:"kc-form-login",action:d.loginAction,method:"post",style:{display:"none"},onSubmit:t=>{try{t.target.login.disabled=!0}catch{}return!0},children:!C&&e.jsxs("div",{className:s("kcFormGroupClass"),children:[e.jsx("label",{htmlFor:"username",className:s("kcLabelClass"),children:i("passkey-autofill-select")}),e.jsx(L,{tabIndex:1,id:"username","aria-invalid":c.existsError("username"),className:s("kcInputClass"),name:"username",defaultValue:y.username??"",autoComplete:"username webauthn",type:"text",autoFocus:!0}),c.existsError("username")&&e.jsx("span",{id:"input-error-username",className:s("kcInputErrorMessageClass"),"aria-live":"polite",children:c.get("username")})]})}),e.jsx("div",{id:"kc-form-passkey-button",className:s("kcFormButtonsClass"),style:{display:"none"},children:e.jsx("input",{id:k,type:"button",autoFocus:!0,value:f("passkey-doAuthenticate"),className:s("kcButtonClass","kcButtonBlockClass","kcButtonLargeClass")})})]})})]})]})}w.__docgenInfo={description:"",methods:[],displayName:"LoginPasskeysConditionalAuthenticate"};export{w as default};

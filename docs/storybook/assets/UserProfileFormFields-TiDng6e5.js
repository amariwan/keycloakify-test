import{j as u}from"./jsx-runtime-Cf8x2fCZ.js";import{r as w}from"./index-BlmOqGMO.js";import{a as g}from"./assert-lEPzpKR_.js";import{i as A,s as H}from"./kc.gen-DublLCkN.js";import{I as W}from"./input-BUdNeJ3u.js";import{L as $}from"./label-CPZjyMp-.js";import{c as G}from"./utils-CKXzwFwe.js";import{S as K,a as Z,b as J,c as Q,d as V}from"./KcPage-Bf8_W5ld.js";import{C as X}from"./checkbox-D-RZ_Qko.js";import{R as Y,a as ee}from"./radio-group-y2YpCi95.js";import{B as E}from"./button-C_ykKUfv.js";import{E as ae,a as te}from"./eye-DheIwJje.js";import"./index-yBjzXJbu.js";import"./iframe-DOGX7Igh.js";import"./index-C6-d9oZJ.js";import"./index-RG4fqDpO.js";import"./index-fNjTmf9T.js";import"./index-Dv8KEsPl.js";import"./index-Dp3B9jqt.js";import"./clsx-B-dksMZM.js";import"./index-BdQq_4o_.js";import"./index-Cnu3ZVWt.js";import"./dropdown-menu-6x-QXDHJ.js";import"./index-De3Pmiai.js";import"./createLucideIcon-C49h6iyD.js";import"./index-xprPBo3d.js";import"./index-DZ2oWOeb.js";import"./mode-toggle-nGGCW_pk.js";import"./card-sF6WieIs.js";/* empty css              */Array.prototype.every||(Array.prototype.every=function(s,a){var n,t;if(this==null)throw new TypeError("this is null or not defined");var r=Object(this),d=r.length>>>0;if(typeof s!="function"&&Object.prototype.toString.call(s)!=="[object Function]")throw new TypeError;for(arguments.length>1&&(n=a),t=0;t<d;){var i;if(t in r){var o;if(i=r[t],n?o=s.call(n,i,t,r):o=s(i,t,r),!o)return!1}t++}return!0});const j=(s,a)=>{if(!s)return"";const n=a.match(/{\d+}/g);if(!n)return"";const t=n.reduce((e,l)=>e+parseInt(l.replace("{","").replace("}","")),0);let r=s.replace(/\D+/g,"");if(parseInt(r)!=r)return"";r.length>t&&(r=r.substring(0,t));const d=n.reduce((e,l)=>e+`(\\d${l})`,"^");let i=new RegExp(d).exec(r);if(!i)return s;let o=a;for(let e=0;e<n.length;e++)o=o.replace(n[e],i[e+1]);return o},ne=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;let S;const P=new WeakSet,_="kcNumberUnFormat",L=`input[data-${_}]`;function re(){S==null||S();const s=n=>{if(P.has(n))return;const t=n.closest("form");t!==null&&(t.addEventListener("submit",()=>{const r=n.getAttribute(`data-${_}`);r&&(n.value=se(n.value,r))}),P.add(n))};document.querySelectorAll(L).forEach(n=>{g(n instanceof HTMLInputElement),s(n)});const a=new MutationObserver(n=>{for(const t of n)t.type==="childList"&&t.addedNodes.length>0&&t.addedNodes.forEach(r=>{if(r.nodeType===Node.ELEMENT_NODE){const d=r.querySelector(L);d!==null&&(g(d instanceof HTMLInputElement),s(d))}})});a.observe(document.body,{childList:!0,subtree:!0}),S=()=>a.disconnect()}const se=(s,a)=>{if(!s)return"";const n=a.match(/{\d+}/g);if(!n)return"";const t=n.reduce((e,l)=>e+parseInt(l.replace("{","").replace("}","")),0);let r=s.replace(/\D+/g,"");if(parseInt(r)!=r)return"";r.length>t&&(r=r.substring(0,t));const d=n.reduce((e,l)=>e+`(\\d${l})`,"^");let i=new RegExp(d).exec(r);if(!i)return s;let o=a;for(let e=0;e<n.length;e++)o=o.replace(n[e],i[e+1]);return o};var ie=function(s,a){var n={};for(var t in s)Object.prototype.hasOwnProperty.call(s,t)&&a.indexOf(t)<0&&(n[t]=s[t]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,t=Object.getOwnPropertySymbols(s);r<t.length;r++)a.indexOf(t[r])<0&&Object.prototype.propertyIsEnumerable.call(s,t[r])&&(n[t[r]]=s[t[r]]);return n};g();const D=new WeakMap;function oe(s){const{kcContext:a}=s;e:{const t=D.get(a);if(t===void 0)break e;return t}const n=le(s);return D.set(a,n),n}function le(s){const{kcContext:a,doMakeUserConfirmPassword:n}=s;re();let t=de({kcContext:a});const r=new Set;return{dispatchFormAction:d=>{t=F({action:d,kcContext:a,doMakeUserConfirmPassword:n,state:t}),r.forEach(i=>i())},getFormState:()=>ce({state:t}),subscribeToFormState:d=>(r.add(d),{unsubscribe:()=>{r.delete(d)}})}}function de(s){var a,n;const{kcContext:t}=s,{getErrors:r}=R({kcContext:t}),d=(()=>{var e;e:{if("profile"in t&&"attributesByName"in t.profile&&Object.keys(t.profile.attributesByName).length!==0)break e;if("register"in t&&t.register instanceof Object&&"formData"in t.register)return["firstName","lastName","email","username"].filter(l=>l!=="username"?!0:!t.realm.registrationEmailAsUsername).map(l=>{var v;return A({name:l,displayName:A(`\${${l}}`),required:!0,value:(v=t.register.formData[l])!==null&&v!==void 0?v:"",html5DataAnnotations:{},readOnly:!1,validators:{},annotations:{},autocomplete:(()=>{switch(l){case"email":return"email";case"username":return"username";default:return}})()})});if("user"in t&&t.user instanceof Object)return["username","email","firstName","lastName"].filter(l=>l!=="username"?!0:t.user.editUsernameAllowed).map(l=>{var v;return A({name:l,displayName:A(`\${${l}}`),required:!0,value:(v=t.user[l])!==null&&v!==void 0?v:"",html5DataAnnotations:{},readOnly:!1,validators:{},annotations:{},autocomplete:(()=>{switch(l){case"email":return"email";case"username":return"username";default:return}})()})});if("email"in t&&t.email instanceof Object)return[A({name:"email",displayName:A("${email}"),required:!0,value:(e=t.email.value)!==null&&e!==void 0?e:"",html5DataAnnotations:{},readOnly:!1,validators:{},annotations:{},autocomplete:"email"})];g(!1,"Unable to mock user profile from the current kcContext")}return Object.values(t.profile.attributesByName).map(H)})();d.forEach(e=>{var l,v,h;e:{if(typeof e.group!="string")break e;const{group:y,groupDisplayHeader:x,groupDisplayDescription:O,groupAnnotations:I}=e;if(delete e.group,delete e.groupDisplayHeader,delete e.groupDisplayDescription,delete e.groupAnnotations,y==="")break e;e.group={name:y,displayHeader:x,displayDescription:O,annotations:I,html5DataAnnotations:{}}}e.validators.options!==void 0&&e.annotations.inputType===void 0&&(e.annotations.inputType="select"),M({attribute:e})&&(e.multivalued=!0),e.multivalued?((l=e.values)!==null&&l!==void 0||(e.values=e.value!==void 0?[e.value]:[]),delete e.value):((v=e.value)!==null&&v!==void 0||(e.value=(h=e.values)===null||h===void 0?void 0:h[0]),delete e.values)});e:{if(!t.passwordRequired)break e;d.forEach((e,l)=>{e.name===(t.realm.registrationEmailAsUsername?"email":"username")&&d.splice(l+1,0,{name:"password",displayName:A("${password}"),required:!0,readOnly:!1,validators:{},annotations:{},autocomplete:"new-password",html5DataAnnotations:{}},{name:"password-confirm",displayName:A("${passwordConfirm}"),required:!0,readOnly:!1,validators:{},annotations:{},html5DataAnnotations:{},autocomplete:"new-password"})})}const i=[];for(const e of d){e:{if(!e.multivalued)break e;const l=!((a=e.values)===null||a===void 0)&&a.length?e.values:[""];a:{if(M({attribute:e}))break a;const v=e.validators.multivalued;if(v===void 0)break a;const{min:h}=v;if(!h)break a;const y=parseInt(`${h}`);for(let x=l.length;x<y;x++)l.push("")}i.push({attribute:e,valueOrValues:l});continue}i.push({attribute:e,valueOrValues:(n=e.value)!==null&&n!==void 0?n:""})}return{formFieldStates:i.map(({attribute:e,valueOrValues:l})=>({attribute:e,errors:r({attributeName:e.name,formFieldStates:i}),hasLostFocusAtLeastOnce:l instanceof Array&&!M({attribute:e})?l.map(()=>!1):!1,valueOrValues:l}))}}const ue=new WeakMap;function ce(s){const{state:a}=s;e:{const n=ue.get(a);if(n===void 0)break e;return n}return{formFieldStates:a.formFieldStates.map(n=>{var{errors:t,hasLostFocusAtLeastOnce:r,attribute:d}=n,i=ie(n,["errors","hasLostFocusAtLeastOnce","attribute"]);return Object.assign({displayableErrors:t.filter(o=>{const e=typeof r=="boolean"?r:o.fieldIndex!==void 0?r[o.fieldIndex]:r[r.length-1];switch(o.source.type){case"server":return!0;case"other":switch(o.source.rule){case"requiredField":return e;case"passwordConfirmMatchesPassword":return e}g(!1);case"passwordPolicy":switch(o.source.name){case"length":return e;case"maxLength":return e;case"digits":return e;case"lowerCase":return e;case"upperCase":return e;case"specialChars":return e;case"notUsername":return!0;case"notEmail":return!0}g(!1);case"validator":switch(o.source.name){case"length":return e;case"pattern":return e;case"email":return e;case"integer":return e;case"multivalued":return e;case"options":return e}g(!1)}}),attribute:d},i)}),isFormSubmittable:a.formFieldStates.every(({errors:n})=>n.length===0)}}function F(s){const{kcContext:a,doMakeUserConfirmPassword:n,action:t}=s;let{state:r}=s;const{getErrors:d}=R({kcContext:a}),i=r.formFieldStates.find(({attribute:o})=>o.name===t.name);return g(i!==void 0),(()=>{var o;switch(t.action){case"update":i.valueOrValues=t.valueOrValues;e:{const{attribute:e}=i,{kcNumberFormat:l}=(o=e.html5DataAnnotations)!==null&&o!==void 0?o:{};if(!l)break e;i.valueOrValues instanceof Array?i.valueOrValues=i.valueOrValues.map(v=>j(v,l)):i.valueOrValues=j(i.valueOrValues,l)}i.errors=d({attributeName:t.name,formFieldStates:r.formFieldStates});e:{const{displayErrorsImmediately:e=!1}=t;if(!e)break e;for(const l of t.valueOrValues instanceof Array?t.valueOrValues.map((...[,v])=>v):[void 0])r=F({state:r,kcContext:a,doMakeUserConfirmPassword:n,action:{action:"focus lost",name:t.name,fieldIndex:l}})}e:{if(n||t.name!=="password")break e;r=F({state:r,kcContext:a,doMakeUserConfirmPassword:n,action:{action:"update",name:"password-confirm",valueOrValues:t.valueOrValues,displayErrorsImmediately:t.displayErrorsImmediately}})}e:{if(!n||t.name!=="password")break e;r=F({state:r,kcContext:a,doMakeUserConfirmPassword:n,action:{action:"update",name:"password-confirm",valueOrValues:(()=>{const e=r.formFieldStates.find(({attribute:l})=>l.name==="password-confirm");return g(e!==void 0),e.valueOrValues})(),displayErrorsImmediately:t.displayErrorsImmediately}})}return;case"focus lost":if(i.hasLostFocusAtLeastOnce instanceof Array){const{fieldIndex:e}=t;g(e!==void 0),i.hasLostFocusAtLeastOnce[e]=!0;return}i.hasLostFocusAtLeastOnce=!0;return}g(!1)})(),Object.assign({},r)}function R(s){const{kcContext:a}=s,{messagesPerField:n,passwordPolicies:t}=a;function r(d){var i,o;const{attributeName:e,formFieldStates:l}=d,v=l.find(({attribute:c})=>c.name===e);g(v!==void 0);const{attribute:h}=v,y=(()=>{var c;let{valueOrValues:m}=v;e:{const{kcNumberUnFormat:f}=(c=h.html5DataAnnotations)!==null&&c!==void 0?c:{};if(!f)break e;m instanceof Array?m=m.map(p=>j(p,f)):m=j(m,f)}return m})();g(h!==void 0);e:{if(h.multivalued){const f=!((i=h.values)===null||i===void 0)&&i.length?h.values:[""];g(y instanceof Array);const p=y;if(JSON.stringify(f)!==JSON.stringify(p.slice(0,f.length)))break e}else{const f=(o=h.value)!==null&&o!==void 0?o:"";if(g(typeof y=="string"),f!==y)break e}let c;try{c=n.existsError(e)}catch{break e}if(!c)break e;return[{advancedMsgArgs:[n.get(e)],fieldIndex:void 0,source:{type:"server"}}]}e:{if(!h.multivalued||M({attribute:h}))break e;g(y instanceof Array);const c=y,m=c.map((...[,f])=>r({attributeName:e,formFieldStates:l.map(b=>b.attribute.name===e?(g(b.valueOrValues instanceof Array),{attribute:Object.assign(Object.assign({},h),{annotations:Object.assign(Object.assign({},h.annotations),{inputType:void 0}),multivalued:!1}),valueOrValues:b.valueOrValues[f]}):b)}).filter(b=>!(b.source.type==="other"&&b.source.rule==="requiredField")).map(b=>Object.assign(Object.assign({},b),{fieldIndex:f}))).reduce((f,p)=>[...f,...p],[]);a:{if(!h.required||c.every(f=>f!==""))break a;m.push({advancedMsgArgs:["error-user-attribute-required"],fieldIndex:void 0,source:{type:"other",rule:"requiredField"}})}return m}e:{if(!h.multivalued||!M({attribute:h}))break e;const c="multivalued",m=h.validators[c];if(m===void 0)return[];const{min:f}=m,p=f?parseInt(`${f}`):h.required?1:0;g(!isNaN(p));const{max:b}=m,k=b?parseInt(`${b}`):1/0;g(!isNaN(k)),g(y instanceof Array);const N=y;return p<=N.length&&N.length<=k?[]:[{advancedMsgArgs:["error-invalid-multivalued-size",`${p}`,`${k}`],fieldIndex:void 0,source:{type:"validator",name:c}}]}g(typeof y=="string");const x=y,O=[];e:{if(e!=="password"||t===void 0)break e;a:{const c="length",m=t[c];if(!m)break a;const f=m;if(x.length>=f)break a;O.push({advancedMsgArgs:["invalidPasswordMinLengthMessage",`${f}`],fieldIndex:void 0,source:{type:"passwordPolicy",name:c}})}a:{const c="maxLength",m=t[c];if(!m)break a;const f=m;if(x.length<=f)break a;O.push({advancedMsgArgs:["invalidPasswordMaxLengthMessage",`${f}`],fieldIndex:void 0,source:{type:"passwordPolicy",name:c}})}a:{const c="digits",m=t[c];if(!m)break a;const f=m;if(x.split("").filter(p=>!isNaN(parseInt(p))).length>=f)break a;O.push({advancedMsgArgs:["invalidPasswordMinDigitsMessage",`${f}`],fieldIndex:void 0,source:{type:"passwordPolicy",name:c}})}a:{const c="lowerCase",m=t[c];if(!m)break a;const f=m;if(x.split("").filter(p=>p===p.toLowerCase()&&p!==p.toUpperCase()).length>=f)break a;O.push({advancedMsgArgs:["invalidPasswordMinLowerCaseCharsMessage",`${f}`],fieldIndex:void 0,source:{type:"passwordPolicy",name:c}})}a:{const c="upperCase",m=t[c];if(!m)break a;const f=m;if(x.split("").filter(p=>p===p.toUpperCase()&&p!==p.toLowerCase()).length>=f)break a;O.push({advancedMsgArgs:["invalidPasswordMinUpperCaseCharsMessage",`${f}`],fieldIndex:void 0,source:{type:"passwordPolicy",name:c}})}a:{const c="specialChars",m=t[c];if(!m)break a;const f=m;if(x.split("").filter(p=>!p.match(/[a-zA-Z0-9]/)).length>=f)break a;O.push({advancedMsgArgs:["invalidPasswordMinSpecialCharsMessage",`${f}`],fieldIndex:void 0,source:{type:"passwordPolicy",name:c}})}a:{const c="notUsername";if(!t[c])break a;const f=l.find(b=>b.attribute.name==="username");if(!f)break a;const p=(()=>{var b;let{valueOrValues:k}=f;g(typeof k=="string");t:{const{kcNumberUnFormat:N}=(b=h.html5DataAnnotations)!==null&&b!==void 0?b:{};if(!N)break t;k=j(k,N)}return k})();if(p===""||x!==p)break a;O.push({advancedMsgArgs:["invalidPasswordNotUsernameMessage"],fieldIndex:void 0,source:{type:"passwordPolicy",name:c}})}a:{const c="notEmail";if(!t[c])break a;const f=l.find(p=>p.attribute.name==="email");if(!f)break a;g(typeof f.valueOrValues=="string");{const p=f.valueOrValues;if(p===""||x!==p)break a}O.push({advancedMsgArgs:["invalidPasswordNotEmailMessage"],fieldIndex:void 0,source:{type:"passwordPolicy",name:c}})}}e:{if(e!=="password-confirm")break e;const c=l.find(m=>m.attribute.name==="password");g(c!==void 0),g(typeof c.valueOrValues=="string");{const m=c.valueOrValues;if(x===m)break e}O.push({advancedMsgArgs:["invalidPasswordConfirmMessage"],fieldIndex:void 0,source:{type:"other",rule:"passwordConfirmMatchesPassword"}})}const{validators:I}=h;e:{if(!h.required||x!=="")break e;O.push({advancedMsgArgs:["error-user-attribute-required"],fieldIndex:void 0,source:{type:"other",rule:"requiredField"}})}e:{const c="length",m=I[c];if(!m)break e;const{"ignore.empty.value":f=!1,max:p,min:b}=m;if(f&&x==="")break e;const k={type:"validator",name:c};p&&x.length>parseInt(`${p}`)&&O.push({advancedMsgArgs:["error-invalid-length-too-long",`${p}`],fieldIndex:void 0,source:k}),b&&x.length<parseInt(`${b}`)&&O.push({advancedMsgArgs:["error-invalid-length-too-short",`${b}`],fieldIndex:void 0,source:k})}e:{const c="pattern",m=I[c];if(m===void 0)break e;const{"ignore.empty.value":f=!1,pattern:p,"error-message":b}=m;if(f&&x===""||new RegExp(p).test(x))break e;const k=[b??"shouldMatchPattern",p];O.push({advancedMsgArgs:k,fieldIndex:void 0,source:{type:"validator",name:c}})}e:{{const p=O[O.length-1];if(p!==void 0&&p.source.type==="validator"&&p.source.name==="pattern")break e}const c="email",m=I[c];if(m===void 0)break e;const{"ignore.empty.value":f=!1}=m;if(f&&x===""||ne.test(x))break e;O.push({advancedMsgArgs:["invalidEmailMessage"],fieldIndex:void 0,source:{type:"validator",name:c}})}e:{const c="integer",m=I[c];if(m===void 0)break e;const{"ignore.empty.value":f=!1,max:p,min:b}=m;if(f&&x==="")break e;const k=parseInt(x),N={type:"validator",name:c};if(isNaN(k)){const z=["mustBeAnInteger"];O.push({advancedMsgArgs:z,fieldIndex:void 0,source:N});break e}if(p&&k>parseInt(`${p}`)){O.push({advancedMsgArgs:["error-number-out-of-range-too-big",`${p}`],fieldIndex:void 0,source:N});break e}if(b&&k<parseInt(`${b}`)){O.push({advancedMsgArgs:["error-number-out-of-range-too-small",`${b}`],fieldIndex:void 0,source:N});break e}}e:{const c="options",m=I[c];if(m===void 0||x===""||m.options.indexOf(x)>=0)break e;O.push({advancedMsgArgs:["notAValidOption"],fieldIndex:void 0,source:{type:"validator",name:c}})}return O}return{getErrors:r}}function M(s){var a,n;const{attribute:t}=s;return(n=(a=t.annotations.inputType)===null||a===void 0?void 0:a.startsWith("multiselect"))!==null&&n!==void 0?n:!1}function me(s){const{attribute:a,values:n,fieldIndex:t}=s,r=(()=>{if(n.length===1)return!1;const i=(()=>{const{multivalued:o}=a.validators;if(o===void 0)return;const e=o.min;if(e!==void 0)return parseInt(`${e}`)})();return i===void 0?!0:n.length!==i})(),d=(()=>{if(t+1!==n.length)return!1;const i=(()=>{const{multivalued:o}=a.validators;if(o===void 0)return;const e=o.max;if(e!==void 0)return parseInt(`${e}`)})();return i===void 0?!0:n.length!==i})();return{hasRemove:r,hasAdd:d}}g();g();g();g();g();g();function fe(s){const{doMakeUserConfirmPassword:a,i18n:n,kcContext:t}=s,r=oe({kcContext:t,doMakeUserConfirmPassword:a}),[d,i]=w.useState(()=>r.getFormState());w.useEffect(()=>{const{unsubscribe:v}=r.subscribeToFormState(()=>{i(r.getFormState())});return()=>v()},[r]);const{advancedMsg:o,advancedMsgStr:e}=n;return{formState:w.useMemo(()=>({isFormSubmittable:d.isFormSubmittable,formFieldStates:d.formFieldStates.map(v=>({attribute:v.attribute,valueOrValues:v.valueOrValues,displayableErrors:v.displayableErrors.map((h,y)=>({errorMessage:u.jsx(w.Fragment,{children:o(...h.advancedMsgArgs)},`${v.attribute.name}-${y}`),errorMessageStr:e(...h.advancedMsgArgs),source:h.source,fieldIndex:h.fieldIndex}))}))}),[d]),dispatchFormAction:r.dispatchFormAction}}const T=w.forwardRef(({className:s,...a},n)=>u.jsx("textarea",{className:G("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:n,...a}));T.displayName="Textarea";T.__docgenInfo={description:"",methods:[],displayName:"Textarea"};function pe(s){const{kcContext:a,i18n:n,onIsFormSubmittableValueChange:t,doMakeUserConfirmPassword:r,BeforeField:d,AfterField:i}=s,{advancedMsg:o}=n,{formState:{formFieldStates:e,isFormSubmittable:l},dispatchFormAction:v}=fe({kcContext:a,i18n:n,doMakeUserConfirmPassword:r});w.useEffect(()=>{t(l)},[l]);const h={current:""};return u.jsx("div",{className:"space-y-4",children:e.map(({attribute:y,displayableErrors:x,valueOrValues:O})=>u.jsxs(w.Fragment,{children:[u.jsx(ve,{attribute:y,groupNameRef:h,i18n:n}),d&&u.jsx(d,{attribute:y,dispatchFormAction:v,displayableErrors:x,valueOrValues:O,i18n:n,kcClsx:()=>""}),u.jsx("div",{className:`space-y-2 ${y.name==="password-confirm"&&!r?"hidden":""}`,children:u.jsxs("div",{className:"space-y-1",children:[u.jsxs($,{htmlFor:y.name,className:"text-sm font-medium text-gray-700",children:[o(y.displayName??""),y.required&&u.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),u.jsxs("div",{className:"space-y-2",children:[y.annotations.inputHelperTextBefore&&u.jsx("p",{className:"text-sm text-gray-500",id:`form-help-text-before-${y.name}`,children:o(y.annotations.inputHelperTextBefore)}),u.jsx(ge,{attribute:y,valueOrValues:O,displayableErrors:x,dispatchFormAction:v,i18n:n}),u.jsx(B,{attribute:y,displayableErrors:x,fieldIndex:void 0}),y.annotations.inputHelperTextAfter&&u.jsx("p",{className:"text-sm text-gray-500",id:`form-help-text-after-${y.name}`,children:o(y.annotations.inputHelperTextAfter)}),i&&u.jsx(i,{attribute:y,dispatchFormAction:v,displayableErrors:x,valueOrValues:O,i18n:n,kcClsx:()=>""})]})]})})]},y.name))})}function ve(s){var d,i;const{attribute:a,groupNameRef:n,i18n:t}=s,{advancedMsg:r}=t;return((d=a.group)==null?void 0:d.name)!==n.current&&(n.current=((i=a.group)==null?void 0:i.name)??"",n.current!=="")?(g(a.group!==void 0),u.jsxs("div",{className:"mb-6",...Object.fromEntries(Object.entries(a.group.html5DataAnnotations).map(([o,e])=>[`data-${o}`,e])),children:[(()=>{const o=a.group.displayHeader??"",e=o!==""?r(o):a.group.name;return u.jsx("div",{className:"mb-2",children:u.jsx("h2",{id:`header-${a.group.name}`,className:"text-lg font-semibold text-gray-900",children:e})})})(),(()=>{const o=a.group.displayDescription??"";if(o!==""){const e=r(o);return u.jsx("p",{id:`description-${a.group.name}`,className:"text-sm text-gray-500",children:e})}return null})()]})):null}function ge(s){const{attribute:a,valueOrValues:n}=s;switch(a.annotations.inputType){case"textarea":return u.jsx(ye,{...s});case"select":case"multiselect":return u.jsx(xe,{...s});case"select-radiobuttons":case"multiselect-checkboxes":return u.jsx(be,{...s});default:{if(n instanceof Array)return u.jsx("div",{className:"space-y-2",children:n.map((r,d)=>u.jsx(U,{...s,fieldIndex:d},d))});const t=u.jsx(U,{...s,fieldIndex:void 0});return a.name==="password"||a.name==="password-confirm"?u.jsx(he,{i18n:s.i18n,passwordInputId:a.name,children:t}):t}}}function he(s){const{i18n:a,passwordInputId:n,children:t}=s,{msgStr:r}=a,[d,i]=w.useReducer(o=>!o,!1);return w.useEffect(()=>{const o=document.getElementById(n);g(o instanceof HTMLInputElement),o.type=d?"text":"password"},[d]),u.jsxs("div",{className:"relative",children:[t,u.jsx(E,{type:"button",variant:"ghost",size:"icon",className:"absolute right-0 top-0 h-full px-3 hover:bg-transparent",onClick:i,"aria-label":r(d?"hidePassword":"showPassword"),"aria-controls":n,children:d?u.jsx(ae,{className:"h-4 w-4 text-gray-500"}):u.jsx(te,{className:"h-4 w-4 text-gray-500"})})]})}function U(s){const{attribute:a,fieldIndex:n,dispatchFormAction:t,valueOrValues:r,i18n:d,displayableErrors:i}=s,{advancedMsgStr:o}=d;return u.jsxs("div",{className:"space-y-2",children:[u.jsx(W,{type:(()=>{const{inputType:e}=a.annotations;return e!=null&&e.startsWith("html5-")?e.slice(6):e??"text"})(),id:a.name,name:a.name,value:n!==void 0?(g(r instanceof Array),r[n]):(g(typeof r=="string"),r),className:"h-10","aria-invalid":i.find(e=>e.fieldIndex===n)!==void 0,disabled:a.readOnly,autoComplete:a.autocomplete,placeholder:a.annotations.inputTypePlaceholder===void 0?void 0:o(a.annotations.inputTypePlaceholder),...a.annotations.inputTypePattern&&{pattern:a.annotations.inputTypePattern},...a.annotations.inputTypeSize&&{size:parseInt(`${a.annotations.inputTypeSize}`)},...a.annotations.inputTypeMaxlength&&{maxLength:parseInt(`${a.annotations.inputTypeMaxlength}`)},...a.annotations.inputTypeMinlength&&{minLength:parseInt(`${a.annotations.inputTypeMinlength}`)},...a.annotations.inputTypeMax&&{max:a.annotations.inputTypeMax},...a.annotations.inputTypeMin&&{min:a.annotations.inputTypeMin},...a.annotations.inputTypeStep&&{step:a.annotations.inputTypeStep},...Object.fromEntries(Object.entries(a.html5DataAnnotations??{}).map(([e,l])=>[`data-${e}`,l])),onChange:e=>{t({action:"update",name:a.name,valueOrValues:n!==void 0?r.map((l,v)=>v===n?e.target.value:l):e.target.value})},onBlur:()=>t({action:"focus lost",name:a.name,fieldIndex:n})}),n!==void 0&&u.jsxs(u.Fragment,{children:[u.jsx(B,{attribute:a,displayableErrors:i,fieldIndex:n}),u.jsx(Oe,{attribute:a,values:r,fieldIndex:n,dispatchFormAction:t,i18n:d})]})]})}function ye(s){const{attribute:a,dispatchFormAction:n,displayableErrors:t,valueOrValues:r}=s;return g(typeof r=="string"),u.jsx(T,{id:a.name,name:a.name,className:"min-h-[100px] resize-y","aria-invalid":t.length!==0,disabled:a.readOnly,...a.annotations.inputTypeCols&&{cols:parseInt(`${a.annotations.inputTypeCols}`)},...a.annotations.inputTypeRows&&{rows:parseInt(`${a.annotations.inputTypeRows}`)},...a.annotations.inputTypeMaxlength&&{maxLength:parseInt(`${a.annotations.inputTypeMaxlength}`)},value:r,onChange:d=>n({action:"update",name:a.name,valueOrValues:d.target.value}),onBlur:()=>n({action:"focus lost",name:a.name,fieldIndex:void 0})})}function xe(s){const{attribute:a,dispatchFormAction:n,displayableErrors:t,i18n:r,valueOrValues:d}=s,i=a.annotations.inputType==="multiselect",o=q(a);return u.jsxs(K,{value:i?void 0:d,onValueChange:e=>n({action:"update",name:a.name,valueOrValues:e}),children:[u.jsx(Z,{className:"h-10","aria-invalid":t.length!==0,children:u.jsx(J,{placeholder:" "})}),u.jsxs(Q,{children:[!i&&u.jsx(V,{value:"",children:"Select..."}),o.map(e=>u.jsx(V,{value:e,children:C(r,a,e)},e))]})]})}function be(s){const{attribute:a,dispatchFormAction:n,i18n:t,valueOrValues:r,displayableErrors:d}=s,{inputType:i}=a.annotations;g(i==="select-radiobuttons"||i==="multiselect-checkboxes");const o=q(a);return i==="select-radiobuttons"?u.jsx(Y,{className:"space-y-3",value:r,onValueChange:e=>n({action:"update",name:a.name,valueOrValues:e}),"aria-invalid":d.length!==0,disabled:a.readOnly,children:o.map(e=>u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx(ee,{value:e,id:`${a.name}-${e}`}),u.jsx($,{htmlFor:`${a.name}-${e}`,className:`text-sm ${a.readOnly?"text-gray-500":"text-gray-900"}`,children:C(t,a,e)})]},e))}):u.jsx("div",{className:"space-y-3",children:o.map(e=>u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx(X,{id:`${a.name}-${e}`,name:a.name,value:e,checked:r instanceof Array?r.includes(e):r===e,disabled:a.readOnly,"aria-invalid":d.length!==0,onCheckedChange:l=>{n({action:"update",name:a.name,valueOrValues:r instanceof Array?l?[...r,e]:r.filter(v=>v!==e):l?e:""})},onBlur:()=>n({action:"focus lost",name:a.name,fieldIndex:void 0})}),u.jsx($,{htmlFor:`${a.name}-${e}`,className:`text-sm ${a.readOnly?"text-gray-500":"text-gray-900"}`,children:C(t,a,e)})]},e))})}function B(s){const{attribute:a,fieldIndex:n}=s,t=s.displayableErrors.filter(r=>r.fieldIndex===n);return t.length===0?null:u.jsx("div",{className:"text-xs text-destructive",children:u.jsx("div",{id:`input-error-${a.name}${n===void 0?"":`-${n}`}`,"aria-live":"polite",children:t.map(({errorMessage:r},d)=>u.jsxs(w.Fragment,{children:[r,d<t.length-1&&u.jsx("br",{})]},d))})})}function Oe(s){const{attribute:a,values:n,fieldIndex:t,dispatchFormAction:r,i18n:d}=s,{msg:i}=d,{hasAdd:o,hasRemove:e}=me({attribute:a,values:n,fieldIndex:t}),l=`-${a.name}-${t+1}`;return u.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e&&u.jsx(E,{id:`kc-remove${l}`,type:"button",variant:"outline",size:"sm",onClick:()=>r({action:"update",name:a.name,valueOrValues:n.filter((v,h)=>h!==t)}),children:i("remove")}),o&&u.jsx(E,{id:`kc-add${l}`,type:"button",variant:"outline",size:"sm",onClick:()=>r({action:"update",name:a.name,valueOrValues:[...n,""]}),children:i("addValue")})]})}function q(s){var a;e:{const{inputOptionsFromValidation:n}=s.annotations;if(n===void 0)break e;g(typeof n=="string");const t=s.validators[n];if(t===void 0||t.options===void 0)break e;return t.options}return((a=s.validators.options)==null?void 0:a.options)??[]}function C(s,a,n){const{advancedMsg:t}=s;if(a.annotations.inputOptionLabels!==void 0){const{inputOptionLabels:r}=a.annotations;return t(r[n]??n)}return a.annotations.inputOptionLabelsI18nPrefix!==void 0?t(`${a.annotations.inputOptionLabelsI18nPrefix}.${n}`):n}pe.__docgenInfo={description:"",methods:[],displayName:"UserProfileFormFields"};export{pe as default};
